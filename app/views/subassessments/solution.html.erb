<div class="container-fluid">
	<div class="panel panel-primary">
		<div class="panel-body">
			<div class="row-fluid">
				<div class="span12">Teilaufgabe <%= @current_subassessment_position %> / <%= @assessment.subassessments.length %></div>
			</div>
			<div class="row-fluid">
				<div class="span2">Aufgabe: </div>
				<div class="span10"><%= @subassessment.text %></div>
			</div>
			<div class="row-fluid">
				<div class="span2">Deine Antwort: </div>
				<div class="span10"><%= @answer %></div>
			</div>
			<% if @next == nil then %>
				<%= form_tag assessment_path(@assessment), :method => :get, onsubmit:"return validatePoints();" do %>

				<div class="row-fluid">
					<div class="span4">
						<%= button_tag type: 'submit', class:"btn btn-xs btn-primary", style:"height:100%; width:100%" do %>
							Prüfung abschließen <span class="glyphicon glyphicon-ok"></span>
						<% end %>
					</div>
				</div>
				<% end %>
			<% else %>
				<%= form_tag perform_assessment_subassessment_path(@assessment, @next), :method => :get, onsubmit:"return validatePoints();" do %>

				<div class="row-fluid">
					<div class="span4">
						<%= button_tag type: 'submit', class:"btn btn-xs btn-primary", style:"height:100%; width:100%;" do %>
							nächste Teilaufgabe <span class="glyphicon glyphicon-arrow-right"></span>
						<% end %>
					</div>
				</div>
				<% end %>
			<% end %>
		</div>
	</div>
</div>

<script>
function validatePoints(){
	var entered_points = document.getElementById('given_points').value;
	if ( entered_points < 0 || entered_points > <%= @subassessment.points %> ){
		alert('Bitte gib eine gültige Punktzahl ein!');
		return false;
	} else {
		return true;
	}
}

</script>

