<div class="container-fluid" style="height: 300px;">
  <div class="row-fluid" id="assessment_title" >
    <div class="col-sm-9" >
      <h1><%= @assessment.title %></h1>
    </div>
    <div class="col-sm-3" >
      <%= button_to assessments_path, class:"btn btn-xs btn-primary", :method => :get do %>
          <span class="glyphicon glyphicon-arrow-left"></span> zur Prüfungsübersicht
      <% end %>
    </div>
  </div>

  <!-- ask user if he/she wants to continue a previously started assessment -->
  <% if @next != nil then%>
      <div id="existing_performance_displayer">
        <div class="row-fluid"><div class="col-sm-12">Du hast diese Prüfung bereits angefangen. Willst Du dort weitermachen oder die bisherige Bearbeitung löschen?</div></div>
        <div class="row-fluid" style="margin-bottom: 10px; margin-top: 10px;">
          <div class="col-sm-6"><%= button_to perform_assessment_subassessment_path(@assessment.id, @next),
                                              :method => :get, class:"btn btn-xs btn-primary", style:"width:100%" do %>
                Weitermachen <span class="glyphicon glyphicon-share-alt"></span>
            <% end %>
          </div>

          <div class="col-sm-6"><%= button_to assessment_performance_path(@assessment.id, @latest_performance, :authenticity_token => form_authenticity_token),
                                              :method => :delete, data: {confirm: "Bist Du Dir sicher?"}, class:"btn btn-xs btn-primary", style:"width:100%" do %>
                Löschen <span class="glyphicon glyphicon-trash"></span>
            <% end %>
          </div>
        </div>
      </div>
  <% end %>

  <div class="col-sm-4" id="info_and_actions" style="overflow-y:scroll; height:550px;">
    <h3> Info </h3> <!-- Informationen zur Aufgabe -->
    von <%= link_to @assessment.user.username, @assessment.user %> <br/>
    erstellt: <%= @assessment.created_at.to_s(format = :db) %> <br/>
    zuetzt bearbeitet: <%= @assessment.updated_at.to_s(format = :db) %> <br/>
    Beschreibung: <%= @assessment.description %> <br/>
    Anzahl der Fragen: <%= @assessment.subassessment_counter %><br />
    Erreichbare Punkte: <%= @assessment.max_points %>	<br/>

    <br />
    Tags:
    <% i = 0 %>
    <% while i < @assessment.knowledge_elements.length - 1 do %>
        <%= link_to @assessment.knowledge_elements[i].tag, @assessment.knowledge_elements[i] %>,
        <% i += 1 %>
    <% end %>
    <% if @assessment.knowledge_elements.last != nil %>
        <%= link_to @assessment.knowledge_elements.last.tag, @assessment.knowledge_elements.last %>
    <% end %>

    <hr/> <!-- Aufgabenaktionen -->

    <!-- Start- bzw. Fortsetzen-/Löschen-Button -->

    <% if @next == nil && @latest_performance == nil then%>
        <div class="row-fluid"><%= button_to start_assessment_path(@assessment.id), :method => :get,
                                             style:"width: 100%", class:"btn btn-xs btn-primary" do %>
              Prüfung starten   <span class="glyphicon glyphicon-play"></span>
          <% end %>
        </div>
    <% elsif @next != nil %>
        <div class="row-fluid"><%= button_to perform_assessment_subassessment_path(@assessment.id, @next),
                                             :method => :get, style:"width: 100%", class:"btn btn-xs btn-primary" do %>
              Prüfung fortsetzen   <span class="glyphicon glyphicon-share-alt"></span>
          <% end %>

        </div>
        <!-- Hat der User eine Prüfung bereits bearbeitet, verschwindet der Prüfung starten - Button! -->
    <% else %>
        Du hast diese Prüfung bereits bearbeitet! <br> <br>
    <% end%>
    <% if (!@assessment.image_file_name.nil?) %>
    <div class="row-fluid"><%= button_to @assessment.image.url, :class => "button", :method => :get,
                                         style:"width: 100%", class:"btn btn-xs btn-primary" do %>
          Datei zur Prüfung ansehen  <span class="glyphicon glyphicon"></span>
      <% end %>
    </div>
      <% end %>

    <% if @assessment.user_id == session[:current_user_id] && (!@assessment.image_file_name.nil?) %>
        <div class="row-fluid"><%= button_to remove_assessment_image_path, :class => "button", :method => :get, data:{confirm: ('Bist du dir sicher?')},
                                             style:"width: 100%", class:"btn btn-xs btn-primary" do %>
              Datei zur Prüfung löschen <span class="glyphicon glyphicon"></span>
          <% end %>
        </div>

    <% end %>

    <div class="row-fluid">
      <%= button_to showclef_assessment_path(@assessment) , :method => :get, style:"width: 100%", class:"btn btn-xs btn-primary" do %>
          Notenschlüssel einsehen   <span class="glyphicon glyphicon-play"></span>
      <% end %>
    </div>
    <!-- Bearbeiten-Button -->
    <% if @assessment.user_id == session[:current_user_id]%>
        <div class="row-fluid">
          <%= button_to edit_assessment_path(@assessment) , :method => :get, style:"width: 100%", class:"btn btn-xs btn-primary" do %>
              Prüfung bearbeiten   <span class="glyphicon glyphicon-pencil"></span>
          <% end %>
        </div>
    <% end %>

    <!-- Notenschlüssel-Button -->
    <% if @assessment.user_id == session[:current_user_id] %>
        <div class="row-fluid">
          <%= button_to clef_assessment_path(@assessment) , :method => :get, style:"width: 100%", class:"btn btn-xs btn-primary" do %>
              Notenschlüssel bearbeiten   <span class="glyphicon glyphicon-pencil"></span>

          <% end %>
        </div>
    <% end %>

    <!-- Zurück-Button -->
    <div class="row-fluid"><%= button_to 'Zurück zur Prüfungsübersicht' , assessments_path, :method => :get, style:"width: 100%", class:"btn btn-xs btn-primary" %></div>

  </div> <!-- /col-4-sm -->




</div>
